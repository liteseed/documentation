---
title: Save and fetch a data-item
description: This example demonstrates saving and querying data using Liteseed
---

This is a simple example in javascript. 
It shows saving and fetching an image on Arweave using Liteseed API.

import { Aside } from '@astrojs/starlight/components';

<Aside type="caution" title="4GB File Size Limit!">
  The API is currently in beta so file upload size limit is set to 4GB.
</Aside>

## Save an Image

For this example we'll use the image below and save it on Arweave.

<img src={"https://api.liteseed.xyz/tx/UUxsGfZ76nNaeSSiHFmY3Shqlsx5OJXRYc2gYrTnWTU/data?mime-type=\"image/jpeg\""} alt={"file.jpg"} />

## Sending the Request

Uploading a data-item requires sending a request to `/tx` endpoint.
The expected body is the raw binary of the data-item.

```js
import { readFileSync } from "fs";
import { createData, ArweaveSigner } from "arbundles";
/**
 * @param {File} file 
 */


async function upload(file) {
  const data = Buffer.from(await file.arrayBuffer());
  const jwk = JSON.parse(readFileSync("./arweave.json").toString());
  const signer = new ArweaveSigner(jwk);

  const dataItem = createData(data, signer);
  await dataItem.sign(signer);
  const size = dataItem.getRaw().length.toString();

  const response = await fetch(`https://api.liteseed.xyz/tx`, {
          method: "POST",
          body: dataItem.getRaw(),
          headers: {
                "content-length": size,
                "content-type": "application/octet-stream",
          }
        });
  data.append("file", new Blob([file.buffer]), file.name);
  data.append("tags[]", file.type)
  data.append("tags[]", "image")
  data.append("tags[]", "ai")

  const response = await fetch("https://api.liteseed.xyz/data", {
    method: "POST",
    body: data,
  });
  const reciept = await response.json();
   console.log(receipt);
}

const file = readFileSync("file.jpeg")
upload(file);
```

The response would look something like this
```json
{
  "id": "UUxsGfZ76nNaeSSiHFmY3Shqlsx5OJXRYc2gYrTnWTU",

} 
```

*Store the id* so you can query your data later easily.

### Paying for the upload

Here `id` is the liteseed data id which you can use to pay for the data.
Next you can pay for your data upload using AR tokens.

```js
import { readFileSync } from "fs";
import { ArweaveSigner } from "arbundles";
/**
 * @param {File} file 
 */
async function pay(file) {
  const jwk = JSON.parse(readFileSync("./arweave.json").toString());
  const arweave = Arweave.init({});
  const { price, address: target } = await liteseed.price(size);

  const tx = await arweave.createTransaction({ quantity: price, target: target }, jwk);
  await arweave.transactions.sign(tx, jwk);
  await arweave.transactions.post(tx);
  console.log(tx.id)

  const response = await fetch(`https://api.liteseed.xyz/tx/${receipt.id}/${tx.id}`, { method: "PUT"});
  const payment = await response.json();
  console.log(payment);
}

const file = readFileSync("file.jpeg")
upload(file);
```

Once your payment is confirmed you can view transaction.
You can view it <a href="https://viewblock.io/arweave/tx/UUxsGfZ76nNaeSSiHFmY3Shqlsx5OJXRYc2gYrTnWTU">here</a>.

# Fetching the image

Fetching the image is super simple.
To embed an image using an `html` tag you can simply use

```xml
<img src={"https://api.liteseed.xyz/tx/{id}"} />
```

Where `id` is the response of the API in the response of the upload.

If you're using javascript you can simply send a `GET` request to `/tx/{id}`.

```js
import { writeFileSync } from "fs";

/**
 *  @param {string} id
 */
async function fetchImage(id) {
  const response = await fetch(`https://api.liteseed.xyz/tx/${receipt.id}`);
  const arrayBuffer = await response.arrayBuffer();
  writeFileSync("fetched.jpg", Buffer.from(arrayBuffer));
}

fetchImage("UUxsGfZ76nNaeSSiHFmY3Shqlsx5OJXRYc2gYrTnWTU");
```
